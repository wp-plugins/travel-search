if(typeof(TG_Searchboxes_Variables)!="undefined"&&typeof(TG_Searchboxes_Variables.tgsbDefaultSettings)!="undefined"){if(TG_Searchboxes_Variables.tgsbDefaultSettings.match(/^\{\&quot\;/)){TG_Searchboxes_Variables.tgsbDefaultSettings=TG_Searchboxes_Variables.tgsbDefaultSettings.replace(/\&quot\;/ig,'"')}TG_Searchboxes_Variables.tgsbDefaultSettings=eval("("+TG_Searchboxes_Variables.tgsbDefaultSettings+")")}function tgsbFromAir(a){if(typeof(a)=="undefined"||a.length==0){return""}returnValue="";jQuery.each(a,function(c,b){if(b.name=="tgsbFromAir"){if(b.value!=TG_Searchboxes_Variables.tgsbDefaultSettings.from_air){returnValue='"from_air":"'+b.value+'"';return}}});return returnValue}function tgsbToAir(a){if(typeof(a)=="undefined"||a.length==0){return""}returnValue="";jQuery.each(a,function(c,b){if(b.name=="tgsbToAir"){if(b.value!=TG_Searchboxes_Variables.tgsbDefaultSettings.to_air){returnValue='"to_air":"'+b.value+'"';return}}});return returnValue}function tgsbDepartureDate(a){if(typeof(a)=="undefined"||a.length==0){return""}returnValue="";jQuery.each(a,function(c,b){if(b.name=="tgsbDepartureDate"){if(b.value!=TG_Searchboxes_Variables.tgsbDefaultSettings.departure_date){returnValue='"departure_date":"'+b.value+'"';return}}});return returnValue}function tgsbReturnDate(a){if(typeof(a)=="undefined"||a.length==0){return""}returnValue="";jQuery.each(a,function(c,b){if(b.name=="tgsbReturnDate"){if(b.value!=TG_Searchboxes_Variables.tgsbDefaultSettings.return_date){returnValue='"return_date":"'+b.value+'"';return}}});return returnValue}function tgsbAdults(a){if(typeof(a)=="undefined"||a.length==0){return""}returnValue="";jQuery.each(a,function(c,b){if(b.name=="tgsbAdults"){if(b.value!=TG_Searchboxes_Variables.tgsbDefaultSettings.adults){returnValue='"adults":"'+b.value+'"';return}}});return returnValue}function tgsbKids(a){if(typeof(a)=="undefined"||a.length==0){return""}returnValue="";jQuery.each(a,function(c,b){if(b.name=="tgsbKids"){if(b.value!=TG_Searchboxes_Variables.tgsbDefaultSettings.kids){returnValue='"kids":"'+b.value+'"';return}}});return returnValue}function tgsbSeniors(a){if(typeof(a)=="undefined"||a.length==0){return""}returnValue="";jQuery.each(a,function(c,b){if(b.name=="tgsbSeniors"){if(b.value!=TG_Searchboxes_Variables.tgsbDefaultSettings.seniors){returnValue='"seniors":"'+b.value+'"';return}}});return returnValue}function tgsbRooms(a){if(typeof(a)=="undefined"||a.length==0){return""}returnValue="";jQuery.each(a,function(c,b){if(b.name=="tgsbRooms"){if(b.value!=TG_Searchboxes_Variables.tgsbDefaultSettings.rooms){returnValue='"rooms":"'+b.value+'"';return}}});return returnValue}function tgsbRTOW(a){if(typeof(a)=="undefined"||a.length==0){return""}returnValue="";jQuery.each(a,function(c,b){if(b.name=="oneway"){b.value=(b.value=="on")?true:false;if(b.value!=TG_Searchboxes_Variables.tgsbDefaultSettings.rtow){returnValue='"rtow":"'+b.value+'"';return}}});return returnValue}function generateShortcode(){var c=jQuery("#tgsb_shortcodeGenerator ul.measuresChooser li a.current").text();c=(c.length==0)?"300x250":c;var d=jQuery("#tgsb_shortcodeGenerator .sb"+c+" .tg_searchbox .tg_container").find("form.sel").attr("class").match(/^(flights|hotels|cars|packages)/);var e=jQuery("#tgsb_shortcodeGenerator .sb"+c+" .tg_searchbox .tg_container form").serializeArray();var a=jQuery("#tgsb_shortcodeGenerator #travelSearchShortcodeUseJavaScript").attr("checked");var f="";tgsb_fromAir=tgsbFromAir(e);f+=(tgsb_fromAir.length)?tgsb_fromAir+",":tgsb_fromAir;tgsb_toAir=tgsbToAir(e);f+=(tgsb_toAir.length)?tgsb_toAir+",":tgsb_toAir;tgsb_departureDate=tgsbDepartureDate(e);f+=(tgsb_departureDate.length)?tgsb_departureDate+",":tgsb_departureDate;tgsb_returnDate=tgsbReturnDate(e);f+=(tgsb_returnDate.length)?tgsb_returnDate+",":tgsb_returnDate;tgsb_adults=tgsbAdults(e);f+=(tgsb_adults.length)?tgsb_adults+",":tgsb_adults;tgsb_kids=tgsbKids(e);f+=(tgsb_kids.length)?tgsb_kids+",":tgsb_kids;tgsb_seniors=tgsbSeniors(e);f+=(tgsb_seniors.length)?tgsb_seniors+",":tgsb_seniors;tgsb_rooms=tgsbRooms(e);f+=(tgsb_rooms.length)?tgsb_rooms+",":tgsb_rooms;tgsb_rtow=tgsbRTOW(e);f+=(tgsb_rtow.length)?tgsb_rtow+",":tgsb_rtow;f+=a?'"usejavascript":"on",':"";f+=(c=="300x250")?"":'"size":"'+c+'",';f+=(d==null)?'"selectedTab":"flights"':((d[1]=="flights")?"":'"selectedTab":"'+d[1]+'"');if(f.match(/\,$/)){f=f.replace(/\,$/,"")}var b="[tg_searchboxes"+(f.length?" options='{"+f+"}']":"]");if(typeof(b)!="undefined"&&b.length){jQuery("#tgsb_shortcodeGenerator #tgsb_shortcode").val(b);jQuery("#tgsb_shortcodeGenerator #tgsb_shortcode_php").val("<?php echo do_shortcode('"+b.replace(/\'/g,"\\'")+"'); ?>")}return true}var ASoptionsShortcodes={delay:175,timeout:5000,script:TG_Searchboxes_Variables.str_ASAjaxURL,loadingClass:"tgsb_as_load",className:"tgsb_as tgsb_asMargin",json:true,frameForIE:true,ajaxParams:{action:"",json:true,lng:"def",dsgn:"flg",addtag:"em",citytype:"airports",maxResults:10,domainPrefix:true},autoSelect:true,offsety:0,format:function(a){return a.innerHTML.replace(/<\/?[a-z]+>/gi,"").replace(/(.*),(.*)\((.*)\)/,"$1 ($3)")},callback:function(a,b){var c=jQuery(b.fld);if(c.hasClass("asFrom")){jQuery("#tgsb_shortcodeGenerator .asFrom").val(c.val());c.parents("#tgsb_shortcodeGenerator").find(".tg_container > form.cars").find(".asFrom").val("")}if(c.hasClass("asTo")){jQuery("#tgsb_shortcodeGenerator .asTo").val(c.val());c.parents("#tgsb_shortcodeGenerator").find(".tg_container > form.cars").find(".asFrom").val(c.val())}generateShortcode()}};jQuery(function(){jQuery("#tgsb_shortcodeGenerator ul.measuresChooser li a").click(function(){measureChoosed=jQuery(this).text();jQuery("#tgsb_shortcodeGenerator ul.measuresChooser li a").removeClass("current");jQuery(this).addClass("current");jQuery("div.tgsb").removeClass("crnt");jQuery("div.sb"+measureChoosed).addClass("crnt");generateShortcode();return false});jQuery("#tgsb_shortcodeGenerator div.tg_searchbox ul.tg_tabs li span").click(function(){selectedTab=jQuery(this).attr("class").match(/^[a-z]+/);var a=jQuery(this).parents("div.tg_searchbox:eq(0)");a.find("ul.tg_tabs li span").removeClass("sel");a.find("ul.tg_tabs li span."+selectedTab).addClass("sel");a.find("div.tg_container form").removeClass("sel");a.find("div.tg_container form."+selectedTab).addClass("sel");generateShortcode();return false});jQuery("#tgsb_shortcodeGenerator input.tgsb_submit_button").click(function(){alert("Here you can set up how the box should appear inside your post.\nTo see this box in action hit Insert and update your post,\nor visit the demo page of this plugin at:\n"+TG_Searchboxes_Variables.demoPage);return false});jQuery("#tgsb_shortcodeGenerator select.adults").change(function(){var a=jQuery(this);a.parents(".tg_searchbox").find(".tg_container > form").find(".adults").val(a.val());generateShortcode()});jQuery("#tgsb_shortcodeGenerator select.kids").change(function(){var a=jQuery(this);a.parents(".tg_searchbox").find(".tg_container > form").find(".kids").val(a.val());generateShortcode()});jQuery("#tgsb_shortcodeGenerator select.seniors").change(function(){var a=jQuery(this);a.parents(".tg_searchbox").find(".tg_container > form").find(".seniors").val(a.val());generateShortcode()});jQuery("#tgsb_shortcodeGenerator select.rooms").change(function(){var a=jQuery(this);a.parents(".tg_searchbox").find(".tg_container > form").find(".rooms").val(a.val());generateShortcode()});jQuery("#tgsb_shortcodeGenerator .tgsb_addAS, #tgsb_shortcodeGenerator .tgsb_addASH").each(function(){jQuery(this).focus(inputFocus).blur(inputBlur);new AS(this.id,ASoptionsShortcodes)});jQuery("#tgsb_shortcodeGenerator .tg_searchbox form").each(function(){var b=jQuery(this).find(".tgsb_addDP");var e=b.get(0).id;var c=b.get(1).id;var d=jQuery(this);var a=false;var a=d.hasClass("flights")?jQuery(this).find("input[name=oneway]"):false;createDatepicker(e,c,a,generateShortcode)})});
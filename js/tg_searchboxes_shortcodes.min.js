/*deleteCache-description:js file used on the settings page of the WP Plugin to generate the shortcodes*/
/*deleteCache-minimizeJS:true*/
if(typeof(TG_Searchboxes_Variables)!='undefined'&&typeof(TG_Searchboxes_Variables.tgsbDefaultSettings)!='undefined'){if(TG_Searchboxes_Variables.tgsbDefaultSettings.match(/^\{\&quot\;/))TG_Searchboxes_Variables.tgsbDefaultSettings=TG_Searchboxes_Variables.tgsbDefaultSettings.replace(/\&quot\;/ig,'"');TG_Searchboxes_Variables.tgsbDefaultSettings=eval("("+TG_Searchboxes_Variables.tgsbDefaultSettings+")")};function tgsbFromAir(serializedFieldsArray){if(typeof(serializedFieldsArray)=='undefined'||serializedFieldsArray.length==0)return'';returnValue='';jQuery.each(serializedFieldsArray,function(i,field){if(field.name=='tgsbFromAir'){if(field.value!=TG_Searchboxes_Variables.tgsbDefaultSettings.from_air){returnValue='"from_air":"'+field.value+'"';return}}});return returnValue};function tgsbToAir(serializedFieldsArray){if(typeof(serializedFieldsArray)=='undefined'||serializedFieldsArray.length==0)return'';returnValue='';jQuery.each(serializedFieldsArray,function(i,field){if(field.name=='tgsbToAir'){if(field.value!=TG_Searchboxes_Variables.tgsbDefaultSettings.to_air){returnValue='"to_air":"'+field.value+'"';return}}});return returnValue};function tgsbDepartureDate(serializedFieldsArray){if(typeof(serializedFieldsArray)=='undefined'||serializedFieldsArray.length==0)return'';returnValue='';jQuery.each(serializedFieldsArray,function(i,field){if(field.name=='tgsbDepartureDate'){if(field.value!=TG_Searchboxes_Variables.tgsbDefaultSettings.departure_date){returnValue='"departure_date":"'+field.value+'"';return}}});return returnValue};function tgsbReturnDate(serializedFieldsArray){if(typeof(serializedFieldsArray)=='undefined'||serializedFieldsArray.length==0)return'';returnValue='';jQuery.each(serializedFieldsArray,function(i,field){if(field.name=='tgsbReturnDate'){if(field.value!=TG_Searchboxes_Variables.tgsbDefaultSettings.return_date){returnValue='"return_date":"'+field.value+'"';return}}});return returnValue};function tgsbAdults(serializedFieldsArray){if(typeof(serializedFieldsArray)=='undefined'||serializedFieldsArray.length==0)return'';returnValue='';jQuery.each(serializedFieldsArray,function(i,field){if(field.name=='tgsbAdults'){if(field.value!=TG_Searchboxes_Variables.tgsbDefaultSettings.adults){returnValue='"adults":"'+field.value+'"';return}}});return returnValue};function tgsbKids(serializedFieldsArray){if(typeof(serializedFieldsArray)=='undefined'||serializedFieldsArray.length==0)return'';returnValue='';jQuery.each(serializedFieldsArray,function(i,field){if(field.name=='tgsbKids'){if(field.value!=TG_Searchboxes_Variables.tgsbDefaultSettings.kids){returnValue='"kids":"'+field.value+'"';return}}});return returnValue};function tgsbSeniors(serializedFieldsArray){if(typeof(serializedFieldsArray)=='undefined'||serializedFieldsArray.length==0)return'';returnValue='';jQuery.each(serializedFieldsArray,function(i,field){if(field.name=='tgsbSeniors'){if(field.value!=TG_Searchboxes_Variables.tgsbDefaultSettings.seniors){returnValue='"seniors":"'+field.value+'"';return}}});return returnValue};function tgsbRooms(serializedFieldsArray){if(typeof(serializedFieldsArray)=='undefined'||serializedFieldsArray.length==0)return'';returnValue='';jQuery.each(serializedFieldsArray,function(i,field){if(field.name=='tgsbRooms'){if(field.value!=TG_Searchboxes_Variables.tgsbDefaultSettings.rooms){returnValue='"rooms":"'+field.value+'"';return}}});return returnValue};function tgsbRTOW(serializedFieldsArray){if(typeof(serializedFieldsArray)=='undefined'||serializedFieldsArray.length==0)return'';returnValue='';jQuery.each(serializedFieldsArray,function(i,field){if(field.name=='oneway'){field.value=(field.value=='on')?true:false;if(field.value!=TG_Searchboxes_Variables.tgsbDefaultSettings.rtow){returnValue='"rtow":"'+field.value+'"';return}}});return returnValue};function generateShortcode(){var tgSearchboxMeasures=jQuery('#tgsb_shortcodeGenerator ul.measuresChooser li a.current').text();tgSearchboxMeasures=(tgSearchboxMeasures.length==0)?'300x250':tgSearchboxMeasures;var selectedTab=jQuery('#tgsb_shortcodeGenerator .sb'+tgSearchboxMeasures+' .tg_searchbox .tg_container').find('form.sel').attr('class').match(/^(flights|hotels|cars|packages)/);var fields=jQuery('#tgsb_shortcodeGenerator .sb'+tgSearchboxMeasures+' .tg_searchbox .tg_container form').serializeArray();var optionsString='';tgsb_fromAir=tgsbFromAir(fields);optionsString+=(tgsb_fromAir.length)?tgsb_fromAir+',':tgsb_fromAir;tgsb_toAir=tgsbToAir(fields);optionsString+=(tgsb_toAir.length)?tgsb_toAir+',':tgsb_toAir;tgsb_departureDate=tgsbDepartureDate(fields);optionsString+=(tgsb_departureDate.length)?tgsb_departureDate+',':tgsb_departureDate;tgsb_returnDate=tgsbReturnDate(fields);optionsString+=(tgsb_returnDate.length)?tgsb_returnDate+',':tgsb_returnDate;tgsb_adults=tgsbAdults(fields);optionsString+=(tgsb_adults.length)?tgsb_adults+',':tgsb_adults;tgsb_kids=tgsbKids(fields);optionsString+=(tgsb_kids.length)?tgsb_kids+',':tgsb_kids;tgsb_seniors=tgsbSeniors(fields);optionsString+=(tgsb_seniors.length)?tgsb_seniors+',':tgsb_seniors;tgsb_rooms=tgsbRooms(fields);optionsString+=(tgsb_rooms.length)?tgsb_rooms+',':tgsb_rooms;tgsb_rtow=tgsbRTOW(fields);optionsString+=(tgsb_rtow.length)?tgsb_rtow+',':tgsb_rtow;optionsString+=(tgSearchboxMeasures=='300x250')?'':'"size":"'+tgSearchboxMeasures+'",';optionsString+=(selectedTab==null)?'"selectedTab":"flights"':((selectedTab[1]=='flights')?'':'"selectedTab":"'+selectedTab[1]+'"');if(optionsString.match(/\,$/)){optionsString=optionsString.replace(/\,$/,'')};var tgSearchboxesShortcode='[tg_searchboxes'+(optionsString.length?' options=\'{'+optionsString+'}\']':']');if(typeof(tgSearchboxesShortcode)!='undefined'&&tgSearchboxesShortcode.length){jQuery('#tgsb_shortcodeGenerator #tgsb_shortcode').val(tgSearchboxesShortcode);jQuery('#tgsb_shortcodeGenerator #tgsb_shortcode_php').val('<?php echo do_shortcode('+"'"+tgSearchboxesShortcode.replace(/\'/g,"\\\'")+"'"+'); ?>')};return true};var ASoptionsShortcodes={delay:175,timeout:5000,script:TG_Searchboxes_Variables.str_ASAjaxURL,loadingClass:'tgsb_as_load',className:'tgsb_as tgsb_asMargin',json:true,frameForIE:true,ajaxParams:{action:'',json:true,lng:'def',dsgn:'flg',addtag:'em',citytype:'airports',maxResults:10,domainPrefix:true},autoSelect:true,offsety:0,format:function(selLiObj){return selLiObj.innerHTML.replace(/<\/?[a-z]+>/gi,'').replace(/(.*),(.*)\((.*)\)/,'$1 ($3)')},callback:function(asElem,asObj){var inp=jQuery(asObj.fld);if(inp.hasClass("asFrom")){jQuery("#tgsb_shortcodeGenerator .asFrom").val(inp.val());inp.parents('#tgsb_shortcodeGenerator').find('.tg_container > form.cars').find('.asFrom').val('')};if(inp.hasClass("asTo")){jQuery("#tgsb_shortcodeGenerator .asTo").val(inp.val());inp.parents('#tgsb_shortcodeGenerator').find('.tg_container > form.cars').find('.asFrom').val(inp.val())};generateShortcode()}};jQuery(function(){jQuery('#tgsb_shortcodeGenerator ul.measuresChooser li a').click(function(){measureChoosed=jQuery(this).text();jQuery('#tgsb_shortcodeGenerator ul.measuresChooser li a').removeClass('current');jQuery(this).addClass('current');jQuery('div.tgsb').removeClass('crnt');jQuery('div.sb'+measureChoosed).addClass('crnt');generateShortcode();return false});jQuery('#tgsb_shortcodeGenerator div.tg_searchbox ul.tg_tabs li span').click(function(){selectedTab=jQuery(this).attr('class').match(/^[a-z]+/);var cont=jQuery(this).parents("div.tg_searchbox:eq(0)");cont.find('ul.tg_tabs li span').removeClass('sel');cont.find('ul.tg_tabs li span.'+selectedTab).addClass('sel');cont.find('div.tg_container form').removeClass('sel');cont.find('div.tg_container form.'+selectedTab).addClass('sel');generateShortcode();return false});jQuery('#tgsb_shortcodeGenerator input.tgsb_submit_button').click(function(){alert('Here you can set up how the box should appear inside your post.'+"\n"+'To see this box in action hit Insert and update your post,'+"\n"+'or visit the demo page of this plugin at:'+"\n"+TG_Searchboxes_Variables.demoPage);return false});jQuery('#tgsb_shortcodeGenerator select.adults').change(function(){var slct=jQuery(this);slct.parents('.tg_searchbox').find('.tg_container > form').find('.adults').val(slct.val());generateShortcode()});jQuery('#tgsb_shortcodeGenerator select.kids').change(function(){var slct=jQuery(this);slct.parents('.tg_searchbox').find('.tg_container > form').find('.kids').val(slct.val());generateShortcode()});jQuery('#tgsb_shortcodeGenerator select.seniors').change(function(){var slct=jQuery(this);slct.parents('.tg_searchbox').find('.tg_container > form').find('.seniors').val(slct.val());generateShortcode()});jQuery('#tgsb_shortcodeGenerator select.rooms').change(function(){var slct=jQuery(this);slct.parents('.tg_searchbox').find('.tg_container > form').find('.rooms').val(slct.val());generateShortcode()});jQuery("#tgsb_shortcodeGenerator .tgsb_addAS, #tgsb_shortcodeGenerator .tgsb_addASH").each(function(){jQuery(this).focus(inputFocus).blur(inputBlur);new AS(this.id,ASoptionsShortcodes)});jQuery('#tgsb_shortcodeGenerator .tg_searchbox form').each(function(){var inputs=jQuery(this).find(".tgsb_addDP");var i1=inputs.get(0).id;var i2=inputs.get(1).id;var currentForm=jQuery(this);var rtowInputs=false;var rtowInputs=currentForm.hasClass('flights')?jQuery(this).find('input[name=oneway]'):false;createDatepicker(i1,i2,rtowInputs,generateShortcode)})});
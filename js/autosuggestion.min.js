window.undefined=window.undefined;function loading(){}var parentObject=this;function cloneObject(a){var c={};for(i in a)c[i]="object"==typeof a[i]?cloneObject(a[i]):a[i];return c}parentObject.getPos=function(a){a=jQuery(a).offset();return{x:a.left,y:a.top}};
var defaultParams={script:"ajax/suggestions/airports.php",minchars:3,className:"as",delay:500,timeout:2500,cache:!0,loadingClass:"aLoad",offsety:2,showNoResults:!1,maxheight:250,noResults:"No results!",meth:"POST",json:!1,frameForIE:!0,autoSelect:!0,ajaxParams:{action:"test",json:this.json},setAjaxParams:function(a){var c=0,b="";for(key in this.ajaxParams)b=0==c?b+(key+"="+a.fld.value):b+("&"+key+"="+this.ajaxParams[key]),c++;a.ajaxObject.data=b;return!0},setAjaxParams:function(a){var c=0,b="";for(key in this.ajaxParams)b=
0==c?b+(key+"="+a.fld.value):b+("&"+key+"="+this.ajaxParams[key]),c++;a.ajaxObject.data=b;return!0},format:function(a){return a.innerHTML.replace(/<\/?[a-z]+>/gi,"")},errorHandler:function(a){}};void 0==parentObject.AutoSuggest&&(parentObject.AutoSuggest={});
parentObject.AutoSuggest=function(a,c){if(!(this.fld=jQuery("#"+a)[0]))return!1;this.fld.setAttribute("autocomplete","off");this.sInput="";this.nInputChars=0;this.aSuggestions={};this.defText=this.fld.value;this.highlighted=null;this.opt=c?cloneObject(c):{};for(k in defaultParams)typeof this.opt[k]!=typeof defaultParams[k]&&(this.opt[k]=defaultParams[k]);var b=this;this.ajaxObject={url:this.opt.script,global:!1,type:this.opt.meth,dataType:"text",data:this.opt.ajaxParams,error:function(a,b,c){},success:function(a){b.generateList(a)},
errorFlag:0,complete:function(a,b){}};this.coords=getPos(this.fld);this.coords.y+=this.fld.offsetHeight+this.opt.offsety;this.opt.frameForIE&&jQuery.browser&&jQuery.browser.msie&&7>parseInt(jQuery.browser.version)?this.iframe=jQuery('<iframe src="about:blank" frameborder="0" marginheight="0" marginwidth="0" scrolling="no" style="position:absolute;background:#fff;z-index:399;">'):this.opt.frameForIE=!1;this.blurTimer=0;b=this;this.isFocused=!0;this.fld.onkeypress=function(a){return b.onKeyPress(a)};this.fld.onkeyup=
function(a){return b.onKeyUp(a)};this.fld.onblur=function(a){b.isFocused=!1;b.fld.value&&(b.blurTimer=setTimeout(function(){b.ajaxObject.errorFlag&&b.opt.errorHandler(this);b.opt.autoSelect?b.setHighlightedValue():b.clearSuggestions(a);b.highlighted=null},b.opt.delay/2))};this.fld.onfocus=function(a){b.highlighted=null;b.isFocused=!0};this.req={};this.fld.autoSuggest=this};
parentObject.AutoSuggest.prototype.onKeyUp=function(a){a=window.event?window.event.keyCode:a.keyCode;var c=!0;switch(a){case 38:this.changeHighlight(a);c=!1;break;case 40:this.changeHighlight(a);c=!1;break;case 13:break;default:this.getSuggestions()}return c};parentObject.AutoSuggest.prototype.onKeyPress=function(a){a=window.event?window.event.keyCode:a.keyCode;var c=!0;this.isFocused=!0;switch(a){case 13:this.setHighlightedValue();c=!1;break;case 27:this.setHighlightedValue()}return c};
parentObject.AutoSuggest.prototype.getSuggestions=function(){var a=this.fld.value.toLowerCase();if(a==this.sInput)return!1;if(a.length<this.opt.minchars)return this.clearSuggestions(),this.sInput="",!1;this.makeReq=!0;if(a.length>this.nInputChars&&this.aSuggestions.length&&this.opt.cache&&this.aSuggestions[0]&&this.aSuggestions[0].childNodes){a=a.replace(/[^a-zA-Z????]/g," ");with(this.aSuggestions[0])for(var c=0;c<childNodes.length;c++)1==childNodes[c].nodeType&&(childNodes[c].innerHTML.replace(/<\/?[^>]+>/gi,
"").toLowerCase().match(a)?childNodes[c].innerHTML=this.highlightText(childNodes[c].innerHTML,a):removeChild(childNodes[c--]));if(!this.aSuggestions[0].childNodes.length)return this.clearSuggestions(),this.doAjaxRequest(this.ajaxObject),!1;this.makeReq=!1;this.opt.frameForIE&&this.updateIframe(this.coords);this.sInput=a;this.nInputChars=a.length;this.aSuggestions[0].parentNode||(document.body.appendChild(this.aSuggestions[0]),this.opt.frameForIE&&document.body.appendChild(this.iframe[0]));this.highlighted&&
this.clearHighlight()}else{this.sInput=a;this.nInputChars=a.length;var b=this;clearTimeout(this.ajID);this.ajID=setTimeout(function(){b.doAjaxRequest(b.ajaxObject)},this.opt.delay)}return!1};parentObject.AutoSuggest.prototype.doAjaxRequest=function(){this.fld.value.length<this.opt.minchars||(jQuery(this.fld).addClass(this.opt.loadingClass),this.opt.setAjaxParams(this),this.req=jQuery.ajax(this.ajaxObject),this.ajaxObject.errorFlag=0)};
parentObject.AutoSuggest.prototype.generateList=function(a){this.coords=getPos(this.fld);this.coords.y+=this.fld.offsetHeight+this.opt.offsety;this.makeReq=!1;this.aSuggestions[0]&&this.aSuggestions[0].parentNode&&this.aSuggestions.remove();var c;if(this.opt.json){try{c=eval("("+a+")")}catch(b){return b}a="<ul>";n=c.argumentList?c.argumentList.length:0;for(i=0;i<c.results.length;i++){a+="<li";for(j=0;j<n;j++){var d=c.argumentList[j];a+=" "+d+'="'+this.escapeHtml(c.results[i][d])+'"'}a+=">"+c.results[i].txt+
"</li>"}a+="</ul>"}else a=a.substr(40);jQuery(this.fld).removeClass(this.opt.loadingClass);this.isFocused?this.createList(a,c):this.opt.autoSelect&&this.autoSelect(a,c)};parentObject.AutoSuggest.prototype.escapeHtml=function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")};
parentObject.AutoSuggest.prototype.autoSelect=function(a,c){if(!c.results||!c.results.length)return this.opt.errorHandler(this),this.ajaxObject.errorFlag=1,clearTimeout(this.blurTimer),!1;firstElement="<li";n=c.argumentList?c.argumentList.length:0;for(j=0;j<n;j++){var b=c.argumentList[j];firstElement+=" "+b+'="'+c.results[0][b]+'"'}firstElement+=">"+c.results[0].txt+"</li>";this.highlighted=jQuery(firstElement).get(0);this.setHighlightedValue();return!0};
parentObject.AutoSuggest.prototype.createList=function(a,c){if(!c.results||!c.results.length)return this.ajaxObject.errorFlag=1,!1;var b=this;b.aSuggestions=jQuery(a).attr({"class":b.opt.className,id:"as"+b.fld.id}).css({left:b.coords.x,top:b.coords.y}).appendTo("body").css({display:"block"});b.aSuggestions.hide();b.aSuggestions.show();internal_cnt=0;b.aSuggestions.find("li").each(function(){internal_cnt++;jQuery(this).addClass(0==internal_cnt%2?"even":"odd")});this.opt.frameForIE&&this.updateIframe(this.coords).appendTo("body");
b.aSuggestions.children("li").each(function(a){this.innerHTML=b.highlightText(this.innerHTML,b.fld.value);jQuery(this).mousedown(function(){b.setHighlightedValue();b.fld.focus()});jQuery(this).mouseover(function(){b.setHighlight(this)})});this.isFocused?(b.highlighted=null,0==b.aSuggestions[0].childNodes.length&&(b.opt.showNoResults?b.aSuggestions.append("<li>"+b.opt.noResults+"</li>"):b.clearSuggestions())):this.setHighlightedValue()};
parentObject.AutoSuggest.prototype.changeHighlight=function(a){return this.aSuggestions[0]?null==this.highlighted?this.setHighlight(this.highlighted=this.aSuggestions[0].firstChild):38==a?this.highlighted==this.aSuggestions[0].firstChild?this.setHighlight(this.aSuggestions[0].lastChild):1==this.highlighted.previousSibling.nodeType?this.setHighlight(this.highlighted.previousSibling):this.setHighlight(this.highlighted.previousSibling.previousSibling):this.highlighted==this.aSuggestions[0].lastChild?
this.setHighlight(this.aSuggestions[0].firstChild):1==this.highlighted.nextSibling.nodeType?this.setHighlight(this.highlighted.nextSibling):this.setHighlight(this.highlighted.nextSibling.nextSibling):!1};parentObject.AutoSuggest.prototype.setHighlight=function(a){null!=this.highlighted&&this.clearHighlight();this.highlighted=a;jQuery(this.highlighted).addClass("as_hl");return!0};
parentObject.AutoSuggest.prototype.clearHighlight=function(){jQuery(this.highlighted).removeClass("as_hl");this.highlighted=null};
parentObject.AutoSuggest.prototype.setHighlightedValue=function(){if(!this.ajaxObject.errorFlag&&(clearTimeout(this.blurTimer),this.fld.value)){if(!this.highlighted){try{var a=this.aSuggestions&&this.aSuggestions.children&&this.aSuggestions.children("li:eq(0)").get(0)}catch(c){}if(!a)return this.clearSuggestions(),!1;this.setHighlight(a)}this.highlighted&&!this.makeReq&&(this.sInput=this.fld.value=this.opt.format(this.highlighted));"function"==typeof this.opt.callback&&this.opt.callback(this.highlighted,
this);this.clearSuggestions();return!0}};parentObject.AutoSuggest.prototype.clearSuggestions=function(){this.aSuggestions[0]&&jQuery(this.aSuggestions[0]).remove();this.aSuggestions[0]=null;this.opt.frameForIE&&jQuery(this.iframe[0]).remove();this.highlighted=null};parentObject.AutoSuggest.prototype.updateIframe=function(a){return this.iframe.css({left:a.x,top:a.y,width:this.aSuggestions[0].clientWidth,height:this.aSuggestions[0].clientHeight})};
parentObject.AutoSuggest.prototype.highlightText=function(a,c){a=a.replace(/<b>(.+)<\/b>/i,"$1");var b=a.replace(/<i>.+<\/i>/i,""),b=b.replace(/<\/?[^>]+>/gi,"");highlighedTxt=b.replace(new RegExp("("+c+")","i"),"<b>$1</b>");return a.replace(b,highlighedTxt)};parentObject.AS=parentObject.AutoSuggest;
/*deleteCache-description:js file used on the Settings page of the WP Plugin*/
/*deleteCache-minimizeJS:true*/
var tgsb_departureDate=false;var tgsb_returnDate=false;var ASoptions={delay:175,timeout:5000,script:TG_Searchboxes_Settings.str_ASAjaxURL,loadingClass:'tgsb_as_load',className:'tgsb_as tgsb_asMargin',json:true,frameForIE:true,ajaxParams:{action:'',json:true,lng:'def',dsgn:'flg',addtag:'em',citytype:'airports',domainPrefix:true},autoSelect:true,offsety:0,format:function(selLiObj){return selLiObj.innerHTML.replace(/<\/?[a-z]+>/gi,'').replace(/(.*),(.*)\((.*)\)/,'$1 ($3)')},callback:function(asElem,asObj){var inp=jQuery(asObj.fld);if(inp.hasClass("asFrom")){inp.parents('.tg_searchbox').find('.tg_container > div:not(.cars)').find('.asFrom').val(inp.val())};if(inp.hasClass("asTo")){jQuery(".asTo").val(inp.val());inp.parents('.tg_searchbox').find('.tg_container > div.cars').find('.asFrom').val(inp.val())}}};function inputFocus(ev){if(this.value==this.defaultValue)this.value='';else this.select()};function inputBlur(ev){if(this.value=='')this.value=this.defaultValue};function createDatepicker(i1,i2,rtowInputs){jQuery('#'+i1+', #'+i2).each(function(){var inp=jQuery(this);inp.datepicker({minDate:0,maxDate:"2y",showOn:"both",buttonImage:TG_Searchboxes_Settings.str_CalendarURL,buttonImageOnly:true,dateFormat:TG_Searchboxes_Settings.str_dateFormat,onSelect:function(date,dpObj){d1=jQuery(this).datepicker("getDate");if(this.id==i1){d2=jQuery.datepicker.parseDate(TG_Searchboxes_Settings.str_dateFormat,jQuery('#'+i2).val());jQuery("#"+i2).datepicker('option','minDate',d1);if(d2&&d1>d2){d2.setTime(d1.getTime()+60*60*24*5*1000);jQuery("#"+i2).val(jQuery.datepicker.formatDate(TG_Searchboxes_Settings.str_dateFormat,d2));var cont=jQuery("#"+i2).parents("div.tg_searchbox:eq(0)");cont.find('input.retDate').val(jQuery.datepicker.formatDate(TG_Searchboxes_Settings.str_dateFormat,d2))}};var inputName=this.name;var cont=jQuery(this).parents("div.tg_searchbox:eq(0)");cont.find('input[name="'+inputName+'"]').val(date);return}});inp.datepicker('setDate',inp.val())});if(typeof(rtowInputs)=='object'&&rtowInputs.length>0){var rt=rtowInputs.get(0).id;var ow=rtowInputs.get(1).id;jQuery('#'+ow).change(function(){if(this.checked)jQuery('#'+i2).attr('disabled',true)});jQuery('#'+rt).change(function(){if(this.checked)jQuery('#'+i2).attr('disabled',false)})}};function setTgSBDates(currentDate,days,months,years){if(typeof(currentDate)=='undefined'||!currentDate)return false;if(typeof(days)=='undefined')days=false;if(typeof(months)=='undefined')months=false;if(typeof(years)=='undefined')years=false;if(!days&&!months&&!years)return false;if(days){days=parseInt(days).toString();if(days!='NaN')return new Date(currentDate.getTime()+parseInt(days)*24*60*60*1000);return false};if(months){months=parseInt(months).toString();if(months!='NaN')return new Date(currentDate.setMonth(currentDate.getMonth()+parseInt(months)));return false};if(years){years=parseInt(years).toString();if(years!='NaN')return new Date(currentDate.setFullYear(currentDate.getFullYear()+parseInt(years)));return false}};function setDepartureDateToForm(currentSelectedDateValue){if(typeof(currentSelectedDateValue)=='undefined'||!currentSelectedDateValue)currentSelectedDateValue=jQuery('#tgsb_departure_date').val();var currentDate=new Date();if(currentSelectedDateValue=='1 day')tgsb_departureDate=setTgSBDates(currentDate,1);if(currentSelectedDateValue=='2 days')tgsb_departureDate=setTgSBDates(currentDate,2);if(currentSelectedDateValue=='3 days')tgsb_departureDate=setTgSBDates(currentDate,3);if(currentSelectedDateValue=='4 days')tgsb_departureDate=setTgSBDates(currentDate,4);if(currentSelectedDateValue=='5 days')tgsb_departureDate=setTgSBDates(currentDate,5);if(currentSelectedDateValue=='6 days')tgsb_departureDate=setTgSBDates(currentDate,6);if(currentSelectedDateValue=='1 week')tgsb_departureDate=setTgSBDates(currentDate,7);if(currentSelectedDateValue=='2 weeks')tgsb_departureDate=setTgSBDates(currentDate,14);if(currentSelectedDateValue=='3 weeks')tgsb_departureDate=setTgSBDates(currentDate,21);if(currentSelectedDateValue=='4 weeks')tgsb_departureDate=setTgSBDates(currentDate,28);if(currentSelectedDateValue=='1 month')tgsb_departureDate=setTgSBDates(currentDate,false,1);if(currentSelectedDateValue=='2 months')tgsb_departureDate=setTgSBDates(currentDate,false,2);if(currentSelectedDateValue=='3 months')tgsb_departureDate=setTgSBDates(currentDate,false,3);if(currentSelectedDateValue=='1 year')tgsb_departureDate=setTgSBDates(currentDate,false,false,1);if(tgsb_departureDate){var cont=jQuery('.tg_searchbox');cont.find('input.depDate').val(jQuery.datepicker.formatDate(TG_Searchboxes_Settings.str_dateFormat,tgsb_departureDate))}};function setReturnDateToForm(currentSelectedDateValue){if(typeof(currentSelectedDateValue)=='undefined'||!currentSelectedDateValue)currentSelectedDateValue=jQuery('#tgsb_return_date').val();if(!tgsb_departureDate)return false;if(currentSelectedDateValue=='+1 day')tgsb_returnDate=setTgSBDates(tgsb_departureDate,1);if(currentSelectedDateValue=='+2 days')tgsb_returnDate=setTgSBDates(tgsb_departureDate,2);if(currentSelectedDateValue=='+3 days')tgsb_returnDate=setTgSBDates(tgsb_departureDate,3);if(currentSelectedDateValue=='+4 days')tgsb_returnDate=setTgSBDates(tgsb_departureDate,4);if(currentSelectedDateValue=='+5 days')tgsb_returnDate=setTgSBDates(tgsb_departureDate,5);if(currentSelectedDateValue=='+6 days')tgsb_returnDate=setTgSBDates(tgsb_departureDate,6);if(currentSelectedDateValue=='+1 week')tgsb_returnDate=setTgSBDates(tgsb_departureDate,7);if(currentSelectedDateValue=='+2 weeks')tgsb_returnDate=setTgSBDates(tgsb_departureDate,14);if(currentSelectedDateValue=='+3 weeks')tgsb_returnDate=setTgSBDates(tgsb_departureDate,21);if(currentSelectedDateValue=='+4 weeks')tgsb_returnDate=setTgSBDates(tgsb_departureDate,28);if(currentSelectedDateValue=='+1 month')tgsb_returnDate=setTgSBDates(tgsb_departureDate,false,1);if(currentSelectedDateValue=='+2 months')tgsb_returnDate=setTgSBDates(tgsb_departureDate,false,2);if(currentSelectedDateValue=='+3 months')tgsb_returnDate=setTgSBDates(tgsb_departureDate,false,3);if(currentSelectedDateValue=='+1 year')tgsb_returnDate=setTgSBDates(tgsb_departureDate,false,false,1);if(tgsb_returnDate){var cont=jQuery('.tg_searchbox');cont.find('input.retDate').val(jQuery.datepicker.formatDate(TG_Searchboxes_Settings.str_dateFormat,tgsb_returnDate))}};jQuery(function(){jQuery(jQuery('#id_referral').get(0)).focus(inputFocus).blur(inputBlur);jQuery(".tgsb_addAS, .tgsb_addASH").each(function(){new AS(this.id,ASoptions)});jQuery('div.tg_searchbox ul.tg_tabs li span').click(function(){selectedTab=jQuery(this).attr('class').match(/^[a-z]+/);var cont=jQuery(this).parents("div.tg_searchbox:eq(0)");cont.find('ul.tg_tabs li span').removeClass('sel');cont.find('ul.tg_tabs li span.'+selectedTab).addClass('sel');cont.find('div.tg_container div').removeClass('sel');cont.find('div.tg_container div.'+selectedTab).addClass('sel')});jQuery('select.depDate').change(function(){var slct=jQuery(this);slct.parents('.tg_searchbox').find('.tg_container > div').find('.depDate').val(slct.val())});jQuery('select.retDate').change(function(){var slct=jQuery(this);slct.parents('.tg_searchbox').find('.tg_container > div').find('.retDate').val(slct.val())});jQuery('select.adults').change(function(){var slct=jQuery(this);slct.parents('.tg_searchbox').find('.tg_container > div').find('.adults').val(slct.val())});jQuery('select.kids').change(function(){var slct=jQuery(this);slct.parents('.tg_searchbox').find('.tg_container > div').find('.kids').val(slct.val())});jQuery('select.seniors').change(function(){var slct=jQuery(this);slct.parents('.tg_searchbox').find('.tg_container > div').find('.seniors').val(slct.val())});jQuery('select.rooms').change(function(){var slct=jQuery(this);slct.parents('.tg_searchbox').find('.tg_container > div').find('.rooms').val(slct.val())});jQuery('img.compareImage').click(function(){alert('Here you can set up the default values the searchboxes will be filled in with.'+"\n"+'To test how the boxes work add them to your pages or visit the demo page.');return false});var formsContainer=jQuery('.tg_searchbox .tg_container > div');formsContainer.each(function(){var currentForm=jQuery(this);if(!currentForm.hasClass('pwr')){var inputs=currentForm.find(".tgsb_addDP");var i1=inputs.get(0).id;var i2=inputs.get(1).id;var rtowInputs=false;var rtowInputs=currentForm.hasClass('flights')?jQuery(this).find('input[name="tg_searchboxes_options[flights_oneway]"]'):false;createDatepicker(i1,i2,rtowInputs)}});jQuery('.colorSettings span, .colorSettings input').click(function(e){var currentClass=this.className.match(/(i1|i2|i3|i4|i5|i6)$/);if(currentClass==null)return false;var colorSettingsContainer=jQuery(this).parents('.colorSettings');var colorPicker=colorSettingsContainer.find('div.'+currentClass);var input=(this.tagName=='SPAN')?colorSettingsContainer.find('input.'+currentClass):this;colorPicker.css('top',((this.tagName=='SPAN')?this.offsetTop:colorSettingsContainer.find('span.'+currentClass).get(0).offsetTop));colorPicker.css('left',((this.tagName=='SPAN')?this.offsetLeft:colorSettingsContainer.find('span.'+currentClass).get(0).offsetLeft));jQuery(input).blur(function(){var inputBackgroundColor=jQuery(input).val();jQuery(input).css('background-color',inputBackgroundColor);setSearchboxColor(input,inputBackgroundColor);colorPicker.addClass('nod')});jQuery.farbtastic(colorPicker,function(a){setSearchboxColor(input,a);jQuery(input).val(a);jQuery(input).css('background-color',a)});colorPicker.removeClass('nod');e.preventDefault();jQuery(document).mousedown(function(){colorPicker.addClass('nod')})});setDepartureDateToForm();setReturnDateToForm();jQuery('#tgsb_departure_date').change(function(){setDepartureDateToForm(this.value);setReturnDateToForm()});jQuery('#tgsb_return_date').change(function(){setDepartureDateToForm();setReturnDateToForm(this.value)})});function setSearchboxColor(input,colorCode){if(jQuery(input).hasClass('i1')){jQuery('.tg_searchbox .tg_container, .tg_searchbox .tg_tabs li span.sel').each(function(){if(!jQuery(this).attr('style')){jQuery(this).attr('style','border-color: '+colorCode+' !important')}else{var elemStyle=jQuery(this).attr('style');if(elemStyle.match('border-color:'))elemStyle=elemStyle.replace(/border-color:[^\;]+/gi,'border-color: '+colorCode+' !important');else elemStyle+=';border-color: '+colorCode+' !important';elemStyle=elemStyle.replace(/^;/,'').replace(/;;/,';');jQuery(this).attr('style',elemStyle)}})};if(jQuery(input).hasClass('i2')){jQuery('.tg_searchbox .tg_container, .tg_searchbox .tg_tabs li span.sel').css('color',colorCode)};if(jQuery(input).hasClass('i3')){jQuery('.tg_searchbox .tg_container, .tg_searchbox .tg_tabs li span.sel').each(function(){if(!jQuery(this).attr('style')){jQuery(this).attr('style','background-color: '+colorCode+' !important')}else{var elemStyle=jQuery(this).attr('style');if(elemStyle.match('background-color:'))elemStyle=elemStyle.replace(/background-color:[^\;]+/gi,'background-color: '+colorCode+' !important');else elemStyle+=';background-color: '+colorCode+' !important';elemStyle=elemStyle.replace(/^;/,'').replace(/;;/,';');jQuery(this).attr('style',elemStyle)}})};if(jQuery(input).hasClass('i4')){var elem=jQuery('.tg_searchbox .tg_tabs li span').not('.sel');if(typeof(elem.attr('style'))=='undefined'){elem.attr('style','background-color: '+colorCode+' !important')}else{var elemStyle=elem.attr('style');if(elemStyle.match('background-color:'))elemStyle=elemStyle.replace(/background-color:[^\;]+/gi,'background-color: '+colorCode+' !important');else elemStyle+=';background-color: '+colorCode+' !important';elemStyle=elemStyle.replace(/^;/,'').replace(/;;/,';');elem.attr('style',elemStyle)}};if(jQuery(input).hasClass('i5')){jQuery('.tg_searchbox .tg_tabs li span').not('.sel').css('color',colorCode)};if(jQuery(input).hasClass('i6')){var elem=jQuery('.tg_searchbox .tg_tabs li span').not('.sel');if(typeof(elem.attr('style'))=='undefined'){elem.attr('style','border-color: '+colorCode+' !important')}else{var elemStyle=elem.attr('style');if(elemStyle.match('border-color:'))elemStyle=elemStyle.replace(/border-color:[^\;]+/gi,'border-color: '+colorCode+' !important');else elemStyle+=';border-color: '+colorCode+' !important';elemStyle=elemStyle.replace(/^;/,'').replace(/;;/,';');elem.attr('style',elemStyle)}};return};
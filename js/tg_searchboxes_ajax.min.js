function setParamsToBoxes(a){if(typeof(a.size)=="undefined"||!a.size){a.size="300x250"}if(typeof(a.selectedTab)=="undefined"||!a.selectedTab){a.selectedTab="flights"}if(typeof(a.alignment)=="undefined"||!a.alignment){a.alignment="alignnone"}var d=jQuery("#TB_ajaxContent").find("input[name=img_align]");for(var h=0;h<d.length;h++){if(d[h].value==a.alignment){d[h].checked=true;break}}var e=jQuery("#TB_ajaxContent").find("ul.measuresChooser");var b="300x250";b=e.find("a.current").html();e.find("a.current").removeClass("current");e.find("a."+a.size).addClass("current");jQuery("#TB_ajaxContent").find("div.tgsb.sb"+b).removeClass("crnt");var g=jQuery("#TB_ajaxContent").find("div.tgsb.sb"+a.size);g.addClass("crnt");var c=g.find("ul.tg_tabs");c.find("span.sel").removeClass("sel");c.find("span."+a.selectedTab).addClass("sel");var k=g.find("div.tg_container");k.find("form.sel").removeClass("sel");k.find("form."+a.selectedTab).addClass("sel");var f=jQuery("#TB_ajaxContent").find("form");var j=jQuery("#TB_ajaxContent").find("a.send_searchbox_to_editor");j.html("Update");jQuery("#TB_ajaxContent").find("input.send_searchbox_to_editor").val("Update Box");if(a.usejavascript){jQuery("#TB_ajaxContent").find("#travelSearchUseJavaScript").attr("checked",true)}f.each(function(){var l=jQuery(this);if(typeof(a.from_air)!="undefined"&&a.from_air&&!l.hasClass("cars")){l.find("input.asFrom").val(a.from_air)}if(typeof(a.to_air)!="undefined"&&a.to_air){l.find("input.asTo").val(a.to_air);if(l.hasClass("cars")){l.find("input.asFrom").val(a.to_air)}}if(typeof(a.departure_date)!="undefined"&&a.departure_date){l.find("input.depDate").val(a.departure_date)}if(typeof(a.return_date)!="undefined"&&a.return_date){l.find("input.retDate").val(a.return_date)}if(typeof(a.adults)!="undefined"&&a.adults){l.find("select.adults").val(a.adults)}if(typeof(a.kids)!="undefined"&&a.kids){l.find("select.kids").val(a.kids)}if(typeof(a.seniors)!="undefined"&&a.seniors){l.find("select.seniors").val(a.seniors)}if(typeof(a.rooms)!="undefined"&&a.rooms){l.find("select.rooms").val(a.rooms)}if(typeof(a.rtow)!="undefined"){var i=l.hasClass("flights")?l.find("input[name=oneway], select[name=oneway], label.radio"):false;var o=(a.rtow==false)?"":"on";if(i.length==1){var m=i.get(0).id;jQuery("#"+m).val(o)}if(i.length==2){var n=i.get(0).id;var p=i.get(1).id;if(o=="on"){jQuery("#"+p).get(0).checked=true}else{jQuery("#"+n).get(0).checked=true}}}})}if(typeof(tgsb_selBoxParam)!="undefined"&&tgsb_selBoxParam){setParamsToBoxes(tgsb_selBoxParam)}jQuery("input[name=img_align], #basic .align .field label, #travelSearchUseJavaScript, label[for=travelSearchUseJavaScript]").click(function(a){a.stopPropagation();return true});jQuery("ul.measuresChooser li a").click(function(){measureChoosed=jQuery(this).text();jQuery("ul.measuresChooser li a").removeClass("current");jQuery(this).addClass("current");jQuery("div.tgsb").removeClass("crnt");jQuery("div.sb"+measureChoosed).addClass("crnt")});var ASoptions={delay:175,timeout:5000,script:TG_Searchboxes_Variables.str_ASAjaxURL,loadingClass:"tgsb_as_load",className:"tgsb_as tgsb_asMargin",json:true,frameForIE:true,ajaxParams:{action:"",json:true,lng:"def",dsgn:"flg",addtag:"em",citytype:"airports",maxResults:10,domainPrefix:true},autoSelect:true,offsety:0,format:function(a){return a.innerHTML.replace(/<\/?[a-z]+>/gi,"").replace(/(.*),(.*)\((.*)\)/,"$1 ($3)")},callback:function(a,b){var c=jQuery(b.fld);if(c.hasClass("asFrom")){jQuery(".asFrom").val(c.val());c.parents("#TB_ajaxContent").find(".tg_container > form.cars").find(".asFrom").val("")}if(c.hasClass("asTo")){jQuery(".asTo").val(c.val());c.parents("#TB_ajaxContent").find(".tg_container > form.cars").find(".asFrom").val(c.val())}}};function inputFocus(a){if(this.value==this.defaultValue){this.value=""}else{this.select()}}function inputBlur(a){if(this.value==""){this.value=this.defaultValue}}function createDatepicker(d,b,a){jQuery("#"+d+", #"+b).each(function(){var f=jQuery(this);f.datepicker({minDate:0,maxDate:"2y",showOn:"both",buttonImage:TG_Searchboxes_Variables.str_CalendarURL,buttonImageOnly:true,dateFormat:TG_Searchboxes_Variables.str_dateFormat,onSelect:function(h,g){d1=jQuery(this).datepicker("getDate");if(this.id==d){d2=jQuery.datepicker.parseDate(TG_Searchboxes_Variables.str_dateFormat,jQuery("#"+b).val());jQuery("#"+b).datepicker("option","minDate",d1);if(d2&&d1>d2){d2.setTime(d1.getTime()+60*60*24*5*1000);jQuery("#"+b).val(jQuery.datepicker.formatDate(TG_Searchboxes_Variables.str_dateFormat,d2));var i=jQuery("#"+b).parents("div.tg_searchbox:eq(0)");i.find("input.retDate").val(jQuery.datepicker.formatDate(TG_Searchboxes_Variables.str_dateFormat,d2))}}inputName=this.name;var i=jQuery(this).parents("div.tg_searchbox:eq(0)");i.find('input[name="'+inputName+'"]').val(h);return}})});if(typeof(a)=="object"&&a.length>0){var c=a.get(0).id;var e=a.get(1).id;a.click(function(f){f.stopPropagation();if(this.id==e&&this.checked){jQuery("#"+b).attr("disabled",true)}if(this.id==c&&this.checked){jQuery("#"+b).attr("disabled",false)}})}}jQuery("select.adults").change(function(){var a=jQuery(this);a.parents(".tg_searchbox").find(".tg_container > form").find(".adults").val(a.val())});jQuery("select.kids").change(function(){var a=jQuery(this);a.parents(".tg_searchbox").find(".tg_container > form").find(".kids").val(a.val())});jQuery("select.seniors").change(function(){var a=jQuery(this);a.parents(".tg_searchbox").find(".tg_container > form").find(".seniors").val(a.val())});jQuery("select.rooms").change(function(){var a=jQuery(this);a.parents(".tg_searchbox").find(".tg_container > form").find(".rooms").val(a.val())});jQuery(".tgsb_addAS, .tgsb_addASH").each(function(){jQuery(this).focus(inputFocus).blur(inputBlur);new AS(this.id,ASoptions)});jQuery("div.tg_searchbox ul.tg_tabs li span").click(function(){selectedTab=jQuery(this).attr("class").match(/^[a-z]+/);var a=jQuery(this).parents("div.tg_searchbox:eq(0)");a.find("ul.tg_tabs li span").removeClass("sel");a.find("ul.tg_tabs li span."+selectedTab).addClass("sel");a.find("div.tg_container form").removeClass("sel");a.find("div.tg_container form."+selectedTab).addClass("sel")});jQuery("input.tgsb_submit_button").click(function(){alert("Here you can set up how the box should appear inside your post.\nTo see this box in action hit Insert and update your post,\nor visit the demo page of this plugin at:\n"+TG_Searchboxes_Variables.demoPage);return false});jQuery(".tg_searchbox form").each(function(){var b=jQuery(this).find(".tgsb_addDP");var e=b.get(0).id;var c=b.get(1).id;var d=jQuery(this);var a=false;var a=d.hasClass("flights")?jQuery(this).find("input[name=oneway], label.radio"):false;createDatepicker(e,c,a)});
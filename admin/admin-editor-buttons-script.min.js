function tgsbFromAir(serializedFieldsArray){if(typeof(serializedFieldsArray)=='undefined'||serializedFieldsArray.length==0)return'';returnValue='';jQuery.each(serializedFieldsArray,function(i,field){if(field.name=='tgsbFromAir'){if(field.value!=TG_Searchboxes_Variables.tgsbDefaultSettings.from_air){returnValue='"from_air":"'+field.value+'"';return}}});return returnValue};function tgsbToAir(serializedFieldsArray){if(typeof(serializedFieldsArray)=='undefined'||serializedFieldsArray.length==0)return'';returnValue='';jQuery.each(serializedFieldsArray,function(i,field){if(field.name=='tgsbToAir'){if(field.value!=TG_Searchboxes_Variables.tgsbDefaultSettings.to_air){returnValue='"to_air":"'+field.value+'"';return}}});return returnValue};function tgsbDepartureDate(serializedFieldsArray){if(typeof(serializedFieldsArray)=='undefined'||serializedFieldsArray.length==0)return'';returnValue='';jQuery.each(serializedFieldsArray,function(i,field){if(field.name=='tgsbDepartureDate'){if(field.value!=TG_Searchboxes_Variables.tgsbDefaultSettings.departure_date){returnValue='"departure_date":"'+field.value+'"';return}}});return returnValue};function tgsbReturnDate(serializedFieldsArray){if(typeof(serializedFieldsArray)=='undefined'||serializedFieldsArray.length==0)return'';returnValue='';jQuery.each(serializedFieldsArray,function(i,field){if(field.name=='tgsbReturnDate'){if(field.value!=TG_Searchboxes_Variables.tgsbDefaultSettings.return_date){returnValue='"return_date":"'+field.value+'"';return}}});return returnValue};function tgsbAdults(serializedFieldsArray){if(typeof(serializedFieldsArray)=='undefined'||serializedFieldsArray.length==0)return'';returnValue='';jQuery.each(serializedFieldsArray,function(i,field){if(field.name=='tgsbAdults'){if(field.value!=TG_Searchboxes_Variables.tgsbDefaultSettings.adults){returnValue='"adults":"'+field.value+'"';return}}});return returnValue};function tgsbKids(serializedFieldsArray){if(typeof(serializedFieldsArray)=='undefined'||serializedFieldsArray.length==0)return'';returnValue='';jQuery.each(serializedFieldsArray,function(i,field){if(field.name=='tgsbKids'){if(field.value!=TG_Searchboxes_Variables.tgsbDefaultSettings.kids){returnValue='"kids":"'+field.value+'"';return}}});return returnValue};function tgsbSeniors(serializedFieldsArray){if(typeof(serializedFieldsArray)=='undefined'||serializedFieldsArray.length==0)return'';returnValue='';jQuery.each(serializedFieldsArray,function(i,field){if(field.name=='tgsbSeniors'){if(field.value!=TG_Searchboxes_Variables.tgsbDefaultSettings.seniors){returnValue='"seniors":"'+field.value+'"';return}}});return returnValue};function tgsbRooms(serializedFieldsArray){if(typeof(serializedFieldsArray)=='undefined'||serializedFieldsArray.length==0)return'';returnValue='';jQuery.each(serializedFieldsArray,function(i,field){if(field.name=='tgsbRooms'){if(field.value!=TG_Searchboxes_Variables.tgsbDefaultSettings.rooms){returnValue='"rooms":"'+field.value+'"';return}}});return returnValue};function tgsbRTOW(serializedFieldsArray){if(typeof(serializedFieldsArray)=='undefined'||serializedFieldsArray.length==0)return'';returnValue='';jQuery.each(serializedFieldsArray,function(i,field){if(field.name=='oneway'){field.value=(field.value=='on')?true:false;if(field.value!=TG_Searchboxes_Variables.tgsbDefaultSettings.rtow){returnValue='"rtow":"'+field.value+'"';return}}});return returnValue};jQuery(document).ready(function(jQuery){var editor_toolbar=jQuery("#ed_toolbar");if(editor_toolbar){var theButton=document.createElement("input");theButton.type="button";theButton.value=TG_Searchboxes_Editor_Button.str_EditorButtonCaption;theButton.className="ed_button";theButton.title=TG_Searchboxes_Editor_Button.str_EditorButtonCaption;theButton.id="ed_button_tg_searchboxes";editor_toolbar.append(theButton);jQuery("#ed_button_tg_searchboxes").click(tg_searchboxes_button_click)};function tg_searchboxes_button_click(){var title="Travelgrove Searchboxes";var url=TG_Searchboxes_Editor_Button.str_EditorButtonAjaxURL.replace(/\&amp\;/ig, '&');tb_show(title,url,false);jQuery("#TB_ajaxContent").width("auto").height("94.5%").click(function(event){var $target=jQuery(event.target);if($target.is("a.send_searchbox_to_editor")||$target.is('input.send_searchbox_to_editor')){var tgSearchboxMeasures=jQuery('ul.measuresChooser li a.current').text();tgSearchboxMeasures=(tgSearchboxMeasures.length==0)?'300x250':tgSearchboxMeasures;var selectedTab=jQuery('.sb'+tgSearchboxMeasures+' .tg_searchbox .tg_container').find('form.sel').attr('class').match(/^(flights|hotels|cars|packages)/);var fields=jQuery('.sb'+tgSearchboxMeasures+' .tg_searchbox .tg_container form').serializeArray();var optionsString='';tgsb_fromAir=tgsbFromAir(fields);optionsString+=(tgsb_fromAir.length)?tgsb_fromAir+',':tgsb_fromAir;tgsb_toAir=tgsbToAir(fields);optionsString+=(tgsb_toAir.length)?tgsb_toAir+',':tgsb_toAir;tgsb_departureDate=tgsbDepartureDate(fields);optionsString+=(tgsb_departureDate.length)?tgsb_departureDate+',':tgsb_departureDate;tgsb_returnDate=tgsbReturnDate(fields);optionsString+=(tgsb_returnDate.length)?tgsb_returnDate+',':tgsb_returnDate;tgsb_adults=tgsbAdults(fields);optionsString+=(tgsb_adults.length)?tgsb_adults+',':tgsb_adults;tgsb_kids=tgsbKids(fields);optionsString+=(tgsb_kids.length)?tgsb_kids+',':tgsb_kids;tgsb_seniors=tgsbSeniors(fields);optionsString+=(tgsb_seniors.length)?tgsb_seniors+',':tgsb_seniors;tgsb_rooms=tgsbRooms(fields);optionsString+=(tgsb_rooms.length)?tgsb_rooms+',':tgsb_rooms;tgsb_rtow=tgsbRTOW(fields);optionsString+=(tgsb_rtow.length)?tgsb_rtow+',':tgsb_rtow;optionsString+=(tgSearchboxMeasures=='300x250')?'':'"size":"'+tgSearchboxMeasures+'",';optionsString+=(selectedTab==null)?'"selectedTab":"flights"':((selectedTab[1]=='flights')?'':'"selectedTab":"'+selectedTab[1]+'"');if(optionsString.match(/\,$/)){optionsString = optionsString.replace(/\,$/, '');};var tgSearchboxesShortcode='[tg_searchboxes'+(optionsString.length?' options=\'{'+optionsString+'}\']':']');send_to_editor(tgSearchboxesShortcode)};return false});return false}});